import{a as E,b as I,e as T,g as N,h as k,i as z,j as F,k as D}from"./chunk-HBGBLJMN.js";import{a as W}from"./chunk-6XMSGHPI.js";import{Ba as m,Ha as d,Ja as r,Ka as n,Ma as h,Na as C,Oa as p,Pa as s,Qa as g,Ra as x,Sa as u,Ta as _,Ua as f,W as P,Wa as y,X as b,kb as v,lb as S,mb as w,pa as a,ta as M,xa as O}from"./chunk-TSBR3PYF.js";var L=()=>["TECNOLOGIA","ENTRETENIMIENTO","EDUCACION","SALUD","DEPORTES"];function V(c,e){if(c&1&&(r(0,"option",10),s(1),n()),c&2){let o=e.$implicit;d("value",o),a(),x(" ",o," ")}}function G(c,e){if(c&1){let o=h();r(0,"button",14),C("click",function(){P(o);let l=p().$implicit,i=p();return b(i.deletePost(l.id))}),s(1,"Eliminar"),n()}}function q(c,e){if(c&1&&(r(0,"div",11)(1,"h4"),s(2),n(),r(3,"p"),s(4),n(),r(5,"span",12),s(6),n(),m(7,G,2,0,"button",13),n()),c&2){let o=e.$implicit,t=p();a(2),g(o.title),a(2),g(o.content),a(2),g(o.category),a(),d("ngIf",t.role==="ADMIN")}}var A=class c{constructor(e){this.postService=e}posts=[];title="";content="";category="TECNOLOGIA";role="";ngOnInit(){let e=JSON.parse(localStorage.getItem("user")||"{}");this.role=e.role,this.loadPosts()}loadPosts(){this.postService.getPosts().subscribe(e=>this.posts=e)}createPost(){if(!this.title.trim()||!this.content.trim()){alert("T\xEDtulo y contenido son obligatorios");return}let e={title:this.title,content:this.content,category:this.category};this.postService.createPost(e).subscribe(()=>{this.title="",this.content="",this.category="TECNOLOGIA",this.loadPosts()})}deletePost(e){confirm("\xBFEst\xE1s seguro de eliminar esta publicaci\xF3n?")&&this.postService.deletePost(e).subscribe(()=>this.loadPosts())}static \u0275fac=function(o){return new(o||c)(M(W))};static \u0275cmp=O({type:c,selectors:[["app-posts"]],decls:15,vars:6,consts:[[1,"full-bg"],[1,"posts-container"],[1,"new-post"],["type","text","placeholder","T\xEDtulo","required","",3,"ngModelChange","ngModel"],["placeholder","Contenido","required","",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"post-list"],["class","post-card",4,"ngFor","ngForOf"],[3,"value"],[1,"post-card"],[1,"category"],["class","delete-btn",3,"click",4,"ngIf"],[1,"delete-btn",3,"click"]],template:function(o,t){o&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Publicaciones del Foro"),n(),r(4,"div",2)(5,"h3"),s(6,"Nueva Publicaci\xF3n"),n(),r(7,"input",3),f("ngModelChange",function(i){return _(t.title,i)||(t.title=i),i}),n(),r(8,"textarea",4),f("ngModelChange",function(i){return _(t.content,i)||(t.content=i),i}),n(),r(9,"select",5),f("ngModelChange",function(i){return _(t.category,i)||(t.category=i),i}),m(10,V,2,2,"option",6),n(),r(11,"button",7),C("click",function(){return t.createPost()}),s(12,"Publicar"),n()(),r(13,"div",8),m(14,q,8,4,"div",9),n()()()),o&2&&(a(7),u("ngModel",t.title),a(),u("ngModel",t.content),a(),u("ngModel",t.category),a(),d("ngForOf",y(5,L)),a(4),d("ngForOf",t.posts))},dependencies:[w,v,S,D,k,z,E,N,I,F,T],styles:[".posts-container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:4rem auto;padding:2rem 1.5rem;background-color:#1e1e2f;border-radius:12px;box-shadow:0 4px 10px #0000004d;color:#f0f0f0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;box-sizing:border-box}.new-post[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background-color:#2a2a3c;border-radius:10px;box-shadow:0 2px 6px #0003}.new-post[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:#fff}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;margin:.5rem 0;padding:.8rem;border:none;border-radius:6px;background-color:#3a3a4d;color:#f0f0f0;font-size:1rem}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#c7c7c7}button[_ngcontent-%COMP%]{padding:.7rem 1rem;background-color:#007bff;border:none;border-radius:6px;color:#fff;font-weight:700;margin-top:.5rem;cursor:pointer;transition:background-color .2s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.post-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.post-card[_ngcontent-%COMP%]{padding:1rem 1.2rem;background-color:#2a2a3c;border-radius:10px;box-shadow:0 2px 6px #00000026;position:relative;color:#f0f0f0;box-sizing:border-box}.post-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.3rem;color:#fff}.post-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#c7c7c7}.author[_ngcontent-%COMP%]{font-size:.85rem;font-style:italic;color:#b0c4de;margin-top:-.2rem;margin-bottom:.3rem}.category[_ngcontent-%COMP%]{font-size:.85rem;font-weight:700;color:#7abaff}.delete-btn[_ngcontent-%COMP%]{background-color:#e53935;position:absolute;right:1rem;top:1rem;padding:.5rem 1rem;border-radius:6px}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c62828}@media (max-width: 768px){.posts-container[_ngcontent-%COMP%]{margin:3rem 1rem;padding:1.5rem 1rem}.new-post[_ngcontent-%COMP%]{padding:1.2rem}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.7rem;font-size:.95rem}button[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.95rem}.post-card[_ngcontent-%COMP%]{padding:.8rem 1rem}.post-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}.delete-btn[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.9rem}}@media (max-width: 480px){.posts-container[_ngcontent-%COMP%]{margin:2rem .5rem;padding:1rem}h3[_ngcontent-%COMP%], .new-post[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:.6rem;font-size:.9rem}.post-card[_ngcontent-%COMP%]{padding:.6rem .8rem}.post-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.delete-btn[_ngcontent-%COMP%]{padding:.3rem .6rem;font-size:.85rem}}"]})};export{A as PostsComponent};
