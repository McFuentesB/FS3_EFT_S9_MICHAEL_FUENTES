import{a as z}from"./chunk-QLG4FWWB.js";import{a as U,b as y,e as O,k as S}from"./chunk-HBGBLJMN.js";import{f as k}from"./chunk-5AYTOCJ3.js";import{Ba as x,Ha as f,Ja as t,Ka as o,Ma as _,Na as p,Oa as c,Pa as a,Qa as P,Sa as w,Ta as C,Ua as b,W as l,X as u,lb as h,mb as M,pa as d,ta as g,xa as v}from"./chunk-TSBR3PYF.js";function V(s,r){if(s&1){let e=_();t(0,"div")(1,"label"),a(2,"Nombre de usuario:"),o(),t(3,"input",4),b("ngModelChange",function(n){l(e);let m=c();return C(m.username,n)||(m.username=n),u(n)}),o(),t(4,"button",5),p("click",function(){l(e);let n=c();return u(n.searchUser())}),a(5,"Buscar Usuario"),o()()}if(s&2){let e=c();d(3),w("ngModel",e.username)}}function T(s,r){if(s&1){let e=_();t(0,"div")(1,"p"),a(2,"Usuario encontrado: "),t(3,"strong"),a(4),o()(),t(5,"label"),a(6,"Nueva contrase\xF1a:"),o(),t(7,"input",6),b("ngModelChange",function(n){l(e);let m=c();return C(m.newPassword,n)||(m.newPassword=n),u(n)}),o(),t(8,"button",5),p("click",function(){l(e);let n=c();return u(n.resetPassword())}),a(9,"Actualizar Contrase\xF1a"),o()()}if(s&2){let e=c();d(4),P(e.foundUser.username),d(3),w("ngModel",e.newPassword)}}var R=class s{constructor(r,e){this.userService=r;this.router=e}username="";newPassword="";foundUser=null;searchUser(){this.userService.getUsers().subscribe(r=>{let e=r.find(i=>i.username===this.username);e?this.foundUser=e:(alert("Usuario no encontrado"),this.foundUser=null)})}resetPassword(){if(!this.newPassword){alert("La nueva contrase\xF1a no puede estar vac\xEDa");return}let r={username:this.foundUser.username,password:this.newPassword,role:this.foundUser.role};this.userService.updateUser(this.foundUser.id,r).subscribe(()=>{alert("Contrase\xF1a actualizada correctamente"),this.username="",this.newPassword="",this.foundUser=null})}goTo(r){this.router.navigate([`/${r}`])}static \u0275fac=function(e){return new(e||s)(g(z),g(k))};static \u0275cmp=v({type:s,selectors:[["app-recover-password"]],decls:8,vars:2,consts:[[1,"full-bg"],[1,"recover-container"],[4,"ngIf"],[1,"back-link",3,"click"],["type","text","name","username",3,"ngModelChange","ngModel"],[3,"click"],["type","password","name","newPassword",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Recuperar Contrase\xF1a"),o(),x(4,V,6,1,"div",2)(5,T,10,2,"div",2),t(6,"a",3),p("click",function(){return i.goTo("login")}),a(7,"\u2190 Volver al inicio de sesi\xF3n"),o()()()),e&2&&(d(4),f("ngIf",!i.foundUser),d(),f("ngIf",i.foundUser))},dependencies:[M,h,S,U,y,O],styles:[".recover-container[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:5rem auto;padding:2rem 1.5rem;box-sizing:border-box;background-color:#2a2a3c;border-radius:12px;box-shadow:0 4px 12px #0000004d;color:#f0f0f0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:2rem;color:#fff}label[_ngcontent-%COMP%]{display:block;margin-top:1rem;font-weight:700;color:#dcdcdc}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;margin:.4rem 0;border:none;border-radius:6px;background-color:#3a3a4d;color:#f0f0f0;font-size:1rem;box-sizing:border-box}input[_ngcontent-%COMP%]::placeholder{color:#c7c7c7}button[_ngcontent-%COMP%]{width:100%;margin-top:1.2rem;padding:.9rem;background-color:#ffc107;color:#000;font-weight:700;border:none;border-radius:6px;cursor:pointer;transition:background-color .2s ease-in-out;box-sizing:border-box}button[_ngcontent-%COMP%]:hover{background-color:#e0a800}.back-link[_ngcontent-%COMP%]{display:block;margin-top:2rem;text-align:center;color:#7abaff;text-decoration:none;font-size:.95rem}.back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.recover-container[_ngcontent-%COMP%]{margin:3rem 1rem;padding:1.5rem 1rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:1.2rem}label[_ngcontent-%COMP%]{font-size:.95rem}input[_ngcontent-%COMP%]{padding:.7rem;font-size:.95rem}button[_ngcontent-%COMP%]{padding:.8rem;font-size:.95rem}.back-link[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.recover-container[_ngcontent-%COMP%]{margin:2rem .5rem;padding:1rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}label[_ngcontent-%COMP%]{font-size:.9rem}input[_ngcontent-%COMP%]{padding:.6rem;font-size:.9rem;margin:.3rem 0}button[_ngcontent-%COMP%]{padding:.7rem;font-size:.9rem}.back-link[_ngcontent-%COMP%]{font-size:.85rem}}"]})};export{R as RecoverPasswordComponent};
